<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KDP Interior Generator</title>
<style>
/* SCOPED CSS (kdp- prefix) */
#kdp-app {
  font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
  color: #333;
  background-color: #f3f4f6;
  max-width: 1200px;
  margin: 40px auto;
  border-radius: 12px;
  box-shadow: 0 10px 40px rgba(0,0,0,0.1);
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

/* HEADER */
.kdp-header {
  background: #232f3e; /* Amazon Dark Blue */
  padding: 20px 30px;
  color: #fff;
  display: flex; justify-content: space-between; align-items: center;
}
.kdp-logo { font-size: 1.4rem; font-weight: 700; }
.kdp-logo span { color: #ff9900; } /* Amazon Orange */

/* LAYOUT */
.kdp-body { display: flex; flex-wrap: wrap; }
.kdp-sidebar {
  flex: 0 0 300px;
  background: #fff;
  padding: 30px;
  border-right: 1px solid #e5e7eb;
}
.kdp-preview-area {
  flex: 1;
  background: #e5e7eb;
  padding: 40px;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  overflow: auto;
  min-height: 600px;
}

/* CONTROLS */
.kdp-group { margin-bottom: 25px; }
.kdp-label { 
  display: block; font-size: 0.85rem; font-weight: 700; color: #4b5563; 
  margin-bottom: 8px; text-transform: uppercase; letter-spacing: 0.5px;
}
.kdp-select, .kdp-input {
  width: 100%; padding: 10px; border: 1px solid #d1d5db; border-radius: 6px;
  font-size: 1rem; color: #111;
}
.kdp-btn {
  width: 100%; padding: 12px; background: #ff9900; color: #111; 
  border: none; border-radius: 6px; font-weight: 700; cursor: pointer;
  transition: background 0.2s; margin-top: 10px;
}
.kdp-btn:hover { background: #ffad33; }
.kdp-btn.secondary { background: #fff; border: 2px solid #232f3e; color: #232f3e; margin-top: 10px; }

/* THE PAPER PREVIEW (Canvas Container) */
.kdp-sheet {
  background: #fff;
  box-shadow: 0 5px 15px rgba(0,0,0,0.2);
  transition: all 0.3s ease;
  position: relative;
}

/* RULER MARKERS (Visual Aid) */
.kdp-ruler-v { position: absolute; left: -25px; top: 0; bottom: 0; width: 20px; border-right: 1px solid #999; font-size: 10px; color: #666; text-align: right; padding-right: 4px; }
.kdp-ruler-h { position: absolute; top: -25px; left: 0; right: 0; height: 20px; border-bottom: 1px solid #999; font-size: 10px; color: #666; padding-top: 4px; }

</style>
</head>
<body>

<div id="kdp-app">
  <div class="kdp-header">
    <div class="kdp-logo">KDP <span>Interior Factory</span></div>
    <div style="font-size: 0.9rem; opacity: 0.8">Tool #1: Product Creator</div>
  </div>

  <div class="kdp-body">
    
    <div class="kdp-sidebar">
      
      <div class="kdp-group">
        <label class="kdp-label">Trim Size (Inches)</label>
        <select id="kdp-size" class="kdp-select" onchange="kdpDraw()">
          <option value="6x9">6" x 9" (Standard Journal)</option>
          <option value="8.5x11">8.5" x 11" (Workbook)</option>
          <option value="5x8">5" x 8" (Pocket Notebook)</option>
        </select>
      </div>

      <div class="kdp-group">
        <label class="kdp-label">Interior Style</label>
        <select id="kdp-style" class="kdp-select" onchange="kdpDraw()">
          <option value="lined">Lined (Journal)</option>
          <option value="dot">Dot Grid (Bullet)</option>
          <option value="graph">Graph 5x5 (Math)</option>
          <option value="blank">Blank (Sketch)</option>
        </select>
      </div>

      <div class="kdp-group">
        <label class="kdp-label">Spacing / Density</label>
        <select id="kdp-spacing" class="kdp-select" onchange="kdpDraw()">
          <option value="9">Wide Rule (9mm)</option>
          <option value="7">College Rule (7mm)</option>
          <option value="5">Narrow / Dense (5mm)</option>
        </select>
      </div>

      <div class="kdp-group">
        <label class="kdp-label">Bleed Settings</label>
        <select id="kdp-bleed" class="kdp-select" onchange="kdpDraw()">
          <option value="no-bleed">No Bleed (Safe Margins)</option>
          <option value="bleed">Full Bleed (Edge to Edge)</option>
        </select>
      </div>

      <button class="kdp-btn" onclick="window.print()">üñ®Ô∏è Print / Save as PDF</button>
      <div style="margin-top:15px; font-size:0.8rem; color:#666; line-height:1.4;">
        <strong>Tip:</strong> Set your printer settings to "Save as PDF" and ensure Scale is 100%.
      </div>

    </div>

    <div class="kdp-preview-area">
      <div id="kdp-canvas-wrapper" style="transform: scale(0.8); transform-origin: top center;">
        <canvas id="kdp-canvas" class="kdp-sheet"></canvas>
      </div>
    </div>

  </div>
</div>

<script>
const DPI = 96; // Screen DPI for preview (Print is usually 300, but we draw for screen then print scales)
const MM_TO_PX = 3.7795; // 1mm approx 3.78px at 96 DPI

function kdpDraw() {
  const canvas = document.getElementById('kdp-canvas');
  const ctx = canvas.getContext('2d');
  
  // 1. Get Settings
  const sizeVal = document.getElementById('kdp-size').value;
  const style = document.getElementById('kdp-style').value;
  const spacingMM = parseInt(document.getElementById('kdp-spacing').value);
  const bleed = document.getElementById('kdp-bleed').value;

  // 2. Define Dimensions (Inches)
  let widthIn, heightIn;
  if(sizeVal === '6x9') { widthIn = 6; heightIn = 9; }
  else if(sizeVal === '8.5x11') { widthIn = 8.5; heightIn = 11; }
  else { widthIn = 5; heightIn = 8; }

  // 3. Convert to Canvas Pixels (High Res Factor for Sharpness)
  const scaleFactor = 2; // Draw at 2x sharpness
  canvas.width = widthIn * DPI * scaleFactor;
  canvas.height = heightIn * DPI * scaleFactor;
  canvas.style.width = (widthIn * DPI) + 'px';
  canvas.style.height = (heightIn * DPI) + 'px';
  
  ctx.scale(scaleFactor, scaleFactor);
  ctx.fillStyle = '#ffffff';
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  // 4. Margins Logic (KDP Standards)
  // No Bleed = 0.5 inch margin all around usually
  // Bleed = Draw to edge
  let margin = (bleed === 'no-bleed') ? 0.5 * DPI : 0; 
  
  // Specific inside margin (Gutter) is usually larger, but for generic generator we use even margins
  // Or we can simulate "No Bleed" by stopping lines before the edge
  
  const widthPx = widthIn * DPI;
  const heightPx = heightIn * DPI;
  const spacingPx = spacingMM * MM_TO_PX;

  ctx.strokeStyle = '#888888'; // Line color
  ctx.lineWidth = 1;

  // 5. Drawing Logic
  if (style === 'lined') {
    // Draw Horizontal Lines
    for (let y = margin + spacingPx; y < heightPx - margin; y += spacingPx) {
      ctx.beginPath();
      ctx.moveTo(margin, y); // Start X
      ctx.lineTo(widthPx - margin, y); // End X
      ctx.stroke();
    }
    // Draw Margin Line (Red vertical line common in notebooks)
    if(style === 'lined' && bleed === 'no-bleed') {
       // Optional: Add vertical margin line like school paper? 
       // KDP usually keeps it simple. Let's skip for professional look.
    }

  } else if (style === 'dot') {
    // Dot Grid
    ctx.fillStyle = '#999999';
    for (let y = margin + spacingPx; y < heightPx - margin; y += spacingPx) {
      for (let x = margin + spacingPx; x < widthPx - margin; x += spacingPx) {
        ctx.beginPath();
        ctx.arc(x, y, 1, 0, 2 * Math.PI); // Tiny dot
        ctx.fill();
      }
    }

  } else if (style === 'graph') {
    // Graph Paper
    ctx.strokeStyle = '#cfcfcf'; // Lighter for graph
    // Horizontals
    for (let y = margin; y <= heightPx - margin; y += spacingPx) {
      ctx.beginPath(); ctx.moveTo(margin, y); ctx.lineTo(widthPx - margin, y); ctx.stroke();
    }
    // Verticals
    for (let x = margin; x <= widthPx - margin; x += spacingPx) {
      ctx.beginPath(); ctx.moveTo(x, margin); ctx.lineTo(x, heightPx - margin); ctx.stroke();
    }
  }
}

// Init
kdpDraw();
</script>

</body>
</html>